<?php
require_once '../service/movieService.php';

// JSON 한글 깨짐 방지
header('Content-Type: application/json');
header("Content-Type:text/html;charset=utf-8");

$sv = new MovieService();

$action = $_POST['action'];

// $action 인수에 따라 매핑 해주는 switch문
switch ($action)
{
    // 영화 상세정보
    case 'search' : 
        $movie_seq = $_POST['movie_seq'];
        $vo = $sv->movieSearch($movie_seq);
        
        // VO클래스로 날아온 데이터 꺼내서 배열에 넣기
        $arr = array("movieTitle" => $vo->getMovieTitle(),
            "movieDirector" => $vo->getMovieDirector(),
            "movieStory" => $vo->getMovieStory(),
            "movieImage" => $vo->getMovieImage(),
            "openingDate" => $vo->getOpeningDate(),
            "movieSeq" => $vo->getMovieSeq());
        
        // JSON 방식으로 인코딩해서 출력
        $json = json_encode($arr);
        echo $json;
        
        //case 'search' 종료
        break;
        
        
    default :
        echo '액션값 오류 : '.$action ;
}

